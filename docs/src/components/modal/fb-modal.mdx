import { Canvas, Controls, Meta } from '@storybook/blocks';
import * as ModalStories from './fb-modal.stories';

<Meta of={ModalStories} />

# Modal

Keeps users informed without changing the current page state.

<Canvas of={ModalStories.Playground} />

## Playground

<Controls of={ModalStories.Playground} />

## Basic Usage

The modal component displays a customizable modal dialog box.

To show the modal, set the `model-value` or use `v-model` with a `Boolean` value. The modal consists of three sections: `header`, `body`, and `footer`.
You can optionally define a title using the `title` property, which is empty by default.

<Canvas
	of={ModalStories.BasicUsage}
	class={'test'}
/>

> **TIP:**
> The `before-close` event handler triggers only when the user clicks the close icon or the backdrop. If you have buttons in the footer slot that close
> the modal, you can achieve the same behavior by implementing the desired actions within the click event handlers of those buttons, rather than
> relying on the before-close event.

## Custom Content

You can include various types of content within the modal, such as tables or forms.

In this example, we demonstrate how to integrate FastyBird UI Table and Form components into the modal.

<Canvas of={ModalStories.CustomContent} />

## Custom Header

You can customize the area where the title is displayed by using the `header` slot. It's important to maintain accessibility by using the `title` property
along with this slot. Alternatively, you can use the `titleId` slot property to specify which element should be read out as the modal title.

<Canvas of={ModalStories.CustomHeader} />

## Nested Modal

If you need to nest a modal inside another modal, you must set the `append-to-body` property to true for the nested modal. This ensures that the nested
modal is appended to the body instead of its parent node, allowing both modals to be correctly rendered. However, it's generally recommended to avoid
nesting modals. If you need multiple modals on the page, it's best to render them as siblings to each other instead of nesting them.

<Canvas of={ModalStories.NestedModal} />

## Centered content

You can center the content of a modal by setting the `center` property to `true`. This will horizontally center the modal's `header` and `footer`.
However, please note that the body of the modal can be any content, so centering it may not always look optimal. If you want to center the body as well,
you'll need to write custom CSS to achieve that effect.

<Canvas of={ModalStories.CentredContent} />

## Align Center Modal

To open the modal from the center of the screen, you can set the `align-center` property to `true`. This will center the modal both horizontally and vertically.
However, please note that if you use the align-center property, the top property will not work simultaneously because the modal is vertically centered
using a flexbox layout.

<Canvas of={ModalStories.AlignCentred} />

## Draggable Modal

To enable dragging of the modal's `header`, set the `draggable` property to `true`. Additionally, if you want the modal to be draggable even when it overflows
the viewport, you can set the `overflow` property to `true`.

<Canvas of={ModalStories.Draggable} />

## Header description

The modal header can be extended with additional descriptions, which can be useful for more complex scenarios where additional information is needed.

<Canvas of={ModalStories.WithDescription} />

---

## Modal API

<div style={{ marginTop: '30px' }}>

    ### Attributes

    | Name                       | Description                                                                                          | Type                                                                     | Default   |
    | -------------------------- | ---------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------ | --------- |
    | model-value / v-model      | visibility of modal                                                                                  | `boolean`                                                                | —         |
    | variant                    | modal header and button variant                                                                      | `primary` \| `default` \| `info` \| `success` \| `warning` \| `danger`    | `primary` |
    | layout                     | modal layout                                                                                         | `default` \| `tablet` \| `phone`                                         | `default` |
    | title                      | title of modal. Can also be passed with a named slot (see the following table)                       | `string`                                                                 | —         |
    | subtitle                   | subtitle of modal. Can also be passed with a named slot (see the following table)                    | `string`                                                                 | —         |
    | icon                       | icon of modal. Can also be passed with a named slot (see the following table)                        | `string` \| `Component`                                                  | —         |
    | width                      | width of modal, default is 50%                                                                       | `string` \| `number`                                                     | —         |
    | fullscreen                 | whether the modal takes up full screen                                                               | `boolean`                                                                | false     |
    | top                        | value for `margin-top` of modal CSS, default is 15vh                                                 | `string`                                                                 | —         |
    | show-header                | whether a modal header is displayed                                                                  | `boolean`                                                                | true      |
    | show-footer                | whether a modal footer is displayed                                                                  | `boolean`                                                                | true      |
    | backdrop                   | whether a mask is displayed                                                                          | `boolean`                                                                | true      |
    | custom-class               | custom class names for backdrop                                                                      | `string`                                                                 | —         |
    | append-to-body             | whether to append modal itself to body. A nested modal should have this property set to `true`       | `boolean`                                                                | false     |
    | append-to                  | which element the modal appends to. Will override `append-to-body`                                   | `string`                                                                 | `body`    |
    | lock-scroll                | whether scroll of body is disabled while modal is displayed                                          | `boolean`                                                                | true      |
    | open-delay                 | the time in milliseconds before open                                                                 | `number`                                                                 | 0         |
    | close-delay                | the time in milliseconds before close                                                                | `number`                                                                 | 0         |
    | close-on-click-backdrop    | whether the modal can be closed by clicking the backdrop                                             | `boolean`                                                                | true      |
    | close-on-press-escape      | whether the modal can be closed by pressing ESC                                                      | `boolean`                                                                | true      |
    | show-close                 | whether to show a close button                                                                       | `boolean`                                                                | true      |
    | before-close               | callback before modal closes, and it will prevent modal from closing, use done to close the modal    | `(done: DoneFn) => void`                                                 | —         |
    | show-left-btn              | whether to show a left action button                                                                 | `boolean`                                                                | true      |
    | left-btn-label             | left action button label                                                                             | `string`                                                                 | `Close`   |
    | show-right-btn             | whether to show a right action button                                                                | `boolean`                                                                | true      |
    | right-btn-label            | right action button label                                                                            | `string`                                                                 | `Ok`      |
    | draggable                  | enable dragging feature for modal                                                                    | `boolean`                                                                | false     |
    | overflow                   | draggable modal can overflow the viewport                                                            | `boolean`                                                                | false     |
    | center                     | whether to align the header and footer in center                                                     | `boolean`                                                                | false     |
    | align-center               | whether to align the modal both horizontally and vertically                                          | `boolean`                                                                | false     |
    | closable                   | whether enable or disable modal close action                                                         | `boolean`                                                                | true      |
    | destroy-on-close           | destroy elements in modal when closed                                                                | `boolean`                                                                | false     |
    | close-icon                 | custom close icon, default is Close                                                                  | `string` \| `Component`                                                  | —         |
    | z-index                    | same as z-index in native CSS, z-order of modal                                                      | `number`                                                                 | —         |
    | header-aria-level `a11y`   | header's `aria-level` attribute                                                                      | `string`                                                                 | 2         |

    ### Slots

    | Name                | Description                                                                                           |
    | ------------------- | ----------------------------------------------------------------------------------------------------- |
    | —                   | content of modal                                                                                      |
    | header              | content of the modal header for replacing whole modal header content with custom one                  |
    | footer              | content of the modal footer for replacing whole modal footer content with custom one                  |
    | content             | content of the modal footer for replacing whole modal content with custom one                         |
    | title               | title of the modal                                                                                    |
    | subtitle            | subtitle of the modal                                                                                 |
    | icon                | modal header icon                                                                                     |
    | left-button         | slot for using custom left button used as `Close` action                                              |
    | right-button        | slot for using custom right button used as `Ok` action                                                |

    ### Events

    | Name             | Description                                       | Type         |
    | ---------------- | ------------------------------------------------- | ------------ |
    | open             | triggers when the modal opens                     | `() => void` |
    | opened           | triggers when the modal opening animation ends    | `() => void` |
    | close            | triggers when the modal closes                    | `() => void` |
    | closed           | triggers when the modal closing animation ends    | `() => void` |
    | open-auto-focus  | triggers after modal opens and content focused    | `() => void` |
    | close-auto-focus | triggers after modal closed and content focused   | `() => void` |
    | left-clicked     | triggers when the modal left button is triggered  | `() => void` |
    | right-clicked    | triggers when the modal right button is triggered | `() => void` |

</div>
